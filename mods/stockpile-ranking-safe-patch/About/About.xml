<?xml version="1.0" encoding="utf-8"?>
<ModMetaData>
  <name>Stockpile Ranking Safe Patch (Local)</name>
  <author>Segas Wolf</author>
  <packageId>local.stockpilerankingsafepatch</packageId>
  <supportedVersions>
    <li>1.6</li>
  </supportedVersions>
  <loadAfter>
    <li>Memegoddess.StockpileRanking</li>
  </loadAfter>
  <description>## Stockpile Ranking Safe Patch

### Problem:
- **Sequence contains no elements**: Repeated exception in RankComp.DetermineUsedFilters() causing game lag
- The error occurs because the code calls .Last() on an empty ranks list without checking

### Solution:
- Prefix-based guards that check if ranks/settings are null or empty BEFORE calling methods that would crash
- Prevents the error from occurring instead of suppressing it after the fact

### Load Order:
Place AFTER the Stockpile Ranking mod (Memegoddess.StockpileRanking) in your mod list.

### Patches:
- Patch_RankComp_DetermineUsedFilter: Checks ranks.Count > 0 before calling .Last()
- Patch_RankComp_DetermineUsedFilters: Skips if rankedSettings is null/empty
- Patch_RankComp_GameComponentTick: Skips tick if not dirty
- Patch_RankComp_LoadedGame: Skips if no rankedSettings on game load</description>
</ModMetaData>
